<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>PI Adapter for Azure Event Hubs principles of operation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="PI Adapter for Azure Event Hubs principles of operation ">
    <meta name="generator" content="docfx 2.56.5.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../v1/index.html" width="46">
                <img id="logo" src="../../v1/main/v1/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Edge System"> 
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="PIAdapterForAzureEventHubsPrinciplesOfOperation">
<h1 id="pi-adapter-for-azure-event-hubs-principles-of-operation">PI Adapter for Azure Event Hubs principles of operation</h1>

<p>This adapter&#39;s operations focus on data collection and stream creation.</p>
<h2 id="adapter-configuration">Adapter configuration</h2>
<p>For the Azure Event Hubs adapter to start data collection, configure the following:</p>
<ul>
<li>Data source: Provide the data source from which the adapter should collect data.</li>
<li>Data selection: Select Azure Event Hubs items to which the adapter should subscribe for data.</li>
<li>Logging: Set up the logging attributes to manage the adapter logging behavior.</li>
</ul>
<p>For more details, see <a class="xref" href="../configuration/pi-adapter-for-azure-event-hubs-data-source-configuration.html">PI Adapter for Azure Event Hubs data source configuration</a> and <a class="xref" href="../configuration/pi-adapter-for-azure-event-hubs-data-selection-configuration.html">PI Adapter for Azure Event Hubs data selection configuration</a>.</p>
<h2 id="connection">Connection</h2>
<p>The adapter communicates with the Azure Event Hubs platform using the <a href="https://www.amqp.org/about/what">AMQP (Advanced Message Queueing Protocol)</a>. Alternatively, the adapter can connect using AMQP over WebSockets using HTTPS protocol with corresponding adapter configuration. A Shared Access Signature (SAS) is required for the adapter to authenticate with the Azure Event Hub namespace, which is supplied by a valid connection string in the adapter&#39;s data source configuration.</p>
<p>For more information, see <a class="xref" href="../configuration/pi-adapter-for-azure-event-hubs-data-source-configuration.html">PI Adapter for Azure Event Hubs data source configuration</a>.</p>
<h2 id="data-collection">Data collection</h2>
<p>After data source and data selection items are configured, the adapter establishes a connection to each event hub within the event hub namespace for all event hubs specified in data selection items. Once a connection is established, the adapter begins consuming events from the event hubs and processes the events as soon as they are published by an event producer and become available to consumers.</p>
<p>For more information see <a class="xref" href="../configuration/pi-adapter-for-azure-event-hubs-data-selection-configuration.html">PI Adapter for Azure Event Hubs data selection configuration</a>.</p>
<h3 id="data-types">Data types</h3>
<p>The following table lists Azure Event Hubs variable types that the adapter collects data from and types of streams that will be created.</p>
<table>
<thead>
<tr>
<th>Event Hubs data type</th>
<th>Stream data type</th>
</tr>
</thead>
<tbody>
<tr>
<td>Boolean</td>
<td>Boolean</td>
</tr>
<tr>
<td>Int16</td>
<td>Int16</td>
</tr>
<tr>
<td>UInt16</td>
<td>UInt16</td>
</tr>
<tr>
<td>Int32</td>
<td>Int32</td>
</tr>
<tr>
<td>UInt32</td>
<td>UInt32</td>
</tr>
<tr>
<td>Int64</td>
<td>Int64</td>
</tr>
<tr>
<td>UInt64</td>
<td>UInt64</td>
</tr>
<tr>
<td>Float</td>
<td>Float32</td>
</tr>
<tr>
<td>Double</td>
<td>Float64</td>
</tr>
<tr>
<td>DateTime</td>
<td>DateTime</td>
</tr>
<tr>
<td>String</td>
<td>String</td>
</tr>
</tbody>
</table>
<h2 id="stream-creation">Stream creation</h2>
<p>The Azure Event Hubs adapter creates a stream value with two properties for each selected Azure Event Hubs item. The properties are described in the following table.</p>
<table>
<thead>
<tr>
<th>Property name</th>
<th>Data type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Timestamp</code></td>
<td>String</td>
<td>The response time of the stream data from the Azure Event Hubs device</td>
</tr>
<tr>
<td><code>Value</code></td>
<td>Specified by the data selection</td>
<td>The value of the stream data from the Azure Event Hubs device</td>
</tr>
</tbody>
</table>
<p>Certain metadata are sent with each stream created. The following metadata are common for every adapter type:</p>
<ul>
<li><strong>ComponentId</strong>: Specifies the data source, for example, <em>EventHubs1</em></li>
<li><strong>ComponentType</strong>: Specifies the type of adapter, for example, <em>EventHubs</em></li>
</ul>
<p>Metadata specific to the Azure Event Hubs adapter are:</p>
<ul>
<li><strong>EventHubName</strong>: Contains the Azure Event Hub name configured in the data selection item.</li>
<li><strong>DeviceId</strong>: Contains the Device Id configured in the data selection item (IoT Hub integration only).</li>
</ul>
<p><strong>Note:</strong> A configured metadata level allows you to set the amount of metadata for the adapter. Specify the metadata level in <a class="xref" href="../main/V1/Configuration/general-configuration.html">General configuration</a>. For the Azure Event Hubs adapter, the following metadata is sent for the individual level:</p>
<ul>
<li><code>None</code>: No metadata</li>
<li><code>Low</code>: AdapterType (ComponentType) and DataSource (ComponentId)</li>
<li><code>Medium</code>: AdapterType (ComponentType), DataSource (ComponentId), EventHubName, and DeviceId</li>
</ul>
<p>Each stream created for the selected measurement has a unique identifier (stream ID). If you specify a custom stream ID for the measurement in the data selection configuration, the adapter uses that stream ID to create the stream. Otherwise, the adapter constructs the stream ID using the following format:</p>
<pre><code class="lang-code">&lt;Id&gt;.&lt;ValueField&gt;
</code></pre><p><strong>Note:</strong> Naming convention is affected by <code>StreamIdPrefix</code> and <code>DefaultStreamIdPattern</code> settings in the data source configuration. For more information, see <a class="xref" href="../configuration/pi-adapter-for-azure-event-hubs-data-source-configuration.html">PI Adapter for Azure Event Hubs data source configuration</a>.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/PI-Adapter-Azure-Event-Hubs-Docs/blob/master/v1/pi-adapter-for-azure-event-hubs-overview/pi-adapter-for-azure-event-hubs-principles-of-operation.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span><a href="https://www.osisoft.com/copyright/">© 2019 - 2021 OSIsoft, LLC. All rights reserved.</a></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
